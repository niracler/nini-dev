# Design: Slidev 精修重构

## Context

初版 PPT 37 页已完成，进入精修阶段。需要在原有精修流程基础上增加：

- 页面类型标注机制
- 脚注推荐标记
- 页面合并决策点

**目标听众**：对 AI 了解甚少的物联网工程师

## Goals / Non-Goals

**Goals:**

- 精简到 ≤30 页，提升信息密度
- 每页有明确的演讲节奏标注
- 优质资料有突出标识
- 概念与实践更紧密结合

**Non-Goals:**

- 不改变整体四部分结构（Opening/History/Pitfalls/Proper Usage）
- 不新增大量内容（仅 1 页 Best Practice）

## 精修流程（完整版）

> ⚠️ **核心约束：单页单任务** — 每次 apply 只处理**一页 PPT**，完成后等待用户确认才能继续下一页。
>
> 🚫 **硬约束：纯文字页 = 回炉重造** — 每页必须有至少一个**有信息量的视觉元素**（截图、图表、代码块、数据可视化等）。仅有样式装饰（颜色卡片、边框、背景色）的文字页仍然算「纯文字」。

**流程（每次 apply = 一页 PPT）：**

```text
┌─────────────────────────────────────────────────────────┐
│  A-B-C-D 自动执行，E 结果处用户 Review                   │
│  不满意 → 从 A 重来                                      │
└─────────────────────────────────────────────────────────┘

Step A: 研究准备（WebSearch — 内容研究）
        → 搜索结果摘要、关键资料链接
        ↓ (自动)
Step B: 构思叙事（Duarte + Winston + Karpathy 视角）
        → 核心想法、记忆点、视觉锚点方案
        ↓ (自动)
Step C: 设计初稿 + 自审（Tufte + antfu 视角 + 脚注详细度）
        → 完整 slide 代码 + 自审结果 + 脚注描述审查
        ↓ (自动)
Step D: 展示优化（WebSearch — 展示方案）
        → 搜索同类主题 PPT 的优秀展示案例
        → 对比初稿，判断是否有更好的布局/视觉表达
        → 有改进空间则优化，无则保持
        ↓ (自动)
Step E: Playwright 截图验证 ← 🔍 用户 Review 点
        → 输出：截图 + 布局说明 + 脚注描述
        → 🆕 用户决策（新增）：
           1. 页面类型？（🔴 重点 / ⚡ 快速带过 / 💻 Coding 演示）
           2. 脚注需要 ⭐ 吗？
           3. 可以和前/后页合并吗？
        → 用户确认 OK → Step F
        → 用户要合并 → 返回 Step A，重新设计合并页
        → 用户不满意 → 回到 Step A 重来
        ↓
Step F: 同步文稿 + 标注
        → 添加 speaker notes 类型标注
        → 脚注加 ⭐（如需要）
        → VitePress 文稿同步更新
        → 完成，等待用户指示下一页
```

**关键原则**：

- ✅ **A-B-C-D 自动执行**：研究、构思、设计、优化一气呵成，减少用户介入
- 🔍 **E 处 Review**：用户只在截图验证处审核，保证最终效果
- 🔄 **不满意就重来**：Review 不通过时，从 A 重新研究，而非修修补补
- 🚫 **禁止跨页面**：完成一页后必须等待用户指示才能开始下一页

## Step A: 研究准备（WebSearch 必做）

每页开始前，根据内容类型搜索相关资料：

| 内容类型 | 搜索示例 |
|---------|---------|
| 技术概念 | `[概念名] best practices 2025` |
| 工具对比 | `[工具名] how it works architecture` |
| 布局参考 | `timeline/comparison/process slide design` |

**搜索策略**：概念深挖 → 多源交叉验证 → WebFetch 获取完整内容 → 整合提炼

## Step B: 构思叙事（Duarte + Winston 视角）

> Nancy Duarte：幻灯片是 "glance media"，叙事要有「现状 vs 更好未来」的张力
> Patrick Winston：开场抓人、一个核心想法、故事包装

**问自己：**

1. **这页在讲什么转变？** 从「现状」到「更好的未来」的张力是什么？
2. **一个核心想法是什么？** 不是两个，不是三个，就一个
3. **开场 10 秒能抓住注意力吗？** 标题够有吸引力吗？
4. **「啊哈」时刻在哪？** 听众看完应该有什么顿悟？

## Step C: 设计初稿（Karpathy 视角）

> Andrej Karpathy：深入浅出、类比驱动、关键洞察

**问自己：**

1. **用什么类比让外行秒懂？** 目标听众是物联网工程师，有嵌入式/硬件领域的类比吗？
2. **有具体例子吗？** 能不能再具体一点？抽象定义是大忌
3. **代码/伪代码能展示吗？** 技术概念用代码比纯文字更直观
4. **图文比例如何？** 纯文字太多会让听众走神

## Step D: 记忆点检查（硬约束 — Gate）

> 🚫 **纯文字页 = 回炉重造**。每页必须有至少一个「视觉锚点」，否则回到 Step A 重新构思。
>
> ⚠️ **注意**：仅有样式装饰（颜色卡片、边框、背景色、emoji）的文字页**仍然算纯文字**，不符合要求。

**✅ 合格的视觉锚点**（有信息量，至少选一个）：

| 类型 | 适用场景 | 获取方式 | 示例 |
|------|---------|---------|------|
| **外部截图** | 研究数据、工具界面、权威来源 | Playwright 截图外部网站 | METR 研究图表 |
| **Mermaid 图** | 架构、流程、时间线、对比 | 内联代码 | Agent ReAct 循环 |
| **代码块** | 技术概念、API 示例 | Shiki 高亮 | Function Call JSON |
| **数据可视化** | 震撼性数字、反直觉结论 | 大字 + 颜色对比 | 「预期 +24% vs 实际 -19%」 |
| **对比表格** | 多维度对比（有真实数据） | grid 布局 | 工具能力矩阵 |

**❌ 不合格的「伪视觉」**（只是装饰）：

| 类型 | 为什么不算 |
|------|-----------|
| 彩色卡片 + 纯文字 | 删掉颜色后信息量不变 |
| emoji 列表 | emoji 是装饰，不是信息 |
| 带边框的文字块 | 边框不传递信息 |
| 背景渐变 + 文字 | 背景是装饰 |

**检查清单：**

- [ ] 这页的「记忆点」是什么？能用一句话说清吗？
- [ ] 如果把文字全删掉，光看图/截图/代码，听众能 get 到 50% 以上信息吗？
- [ ] 这个记忆点在其他页面出现过吗？（避免重复）

## Step E: Playwright MCP 验证 + 用户 Review

使用 Playwright MCP 工具自动截图验证布局：

1. 确认 Slidev dev server 已运行（一般来说我已经启动了）
2. 调用 Playwright 截图指定页面
3. 检查：文字是否溢出、间距是否合理、Mermaid 图是否正常渲染

**🆕 用户 Review 决策点：**

| 决策项 | 选项 | 说明 |
|--------|------|------|
| 页面类型 | 🔴 重点 / ⚡ 快速带过 / 💻 Coding 演示 | 写入 speaker notes |
| 脚注推荐 | 是否加 ⭐ | 强烈推荐阅读原文的脚注 |
| 页面合并 | 是否与前/后页合并 | 合并则返回 Step A 重新设计 |

## Step F: 自审（Tufte + antfu 视角）

### Tufte 视角：信噪比审查

> Edward Tufte：最大化「数据墨水比」，每个像素都要传递信息

**逐一检查每个视觉元素，问：**

1. **如果删掉这个元素，会损失什么信息？** 如果答案是「没有」，删掉
2. **这个装饰有必要吗？** 边框、阴影、背景色是否真的帮助理解？
3. **文字能再精简吗？** 能用 5 个字说清的，不要用 10 个字

### antfu 视角：Slidev 最佳实践

> antfu 是 Slidev 作者，风格简洁、优雅、技术感强

**问自己：**

1. **代码优先**：技术概念能不能用代码/伪代码展示？
2. **动画节制**：`v-click` 用得太多了吗？动画服务于理解，不是炫技
3. **留白呼吸**：页面是否太挤？适度留白让重点突出
4. **Slidev 原生能力**：用到了布局系统、Monaco editor、Shiki magic move 吗？还是在硬写 HTML？
5. **一致性**：和前后页的视觉风格一致吗？

## 🆕 新增：页面类型标注格式

在页面**右上角**显示标注，让演讲者和观众都能看到：

```markdown
# 某页标题

<div class="abs-tr m-6 px-2 py-1 text-xs bg-gray-500/10 rounded opacity-60">💻 演示</div>

内容...
```

**标注类型：**

| 标注 | 含义 | 演讲策略 |
|------|------|----------|
| 🔴 重点 | 核心概念/关键洞察 | 详细讲解，确保听众理解 |
| ⏩ 快速带过 | 背景信息/过渡页 | 30 秒内带过 |
| 💻 演示 | 需要现场演示 | 准备演示环境，预留时间 |

## 🆕 新增：脚注推荐标记

在脚注描述前加 ⭐ 表示强烈推荐阅读原文：

```html
<sup>1</sup> ⭐ 🔬 L1 | <a href="...">标题</a> — 描述
```

**使用场景：**

- 原文有更丰富的示例/数据
- 原文是该领域的 canonical reference
- 对深入理解该概念至关重要

## 🆕 新增：页面合并策略

用户在 Review 时主导合并决策，常见合并模式：

| 模式 | 示例 |
|------|------|
| 概念 + 工具实例 | Token 概念 + Token 计数工具安利 |
| 时间线压缩 | 多个历史事件合并为一页时间线 |
| 对比合并 | 两个对比项合并为 two-cols 布局 |

## 参考手册（按需查阅）

### 术语统一表

| 中文术语 | 统一写法 | 备注 |
|---------|---------|------|
| 大语言模型 | LLM | 首次出现时写全称 |
| 词元/令牌 | Token | |
| 上下文窗口 | Context Window | |
| 幻觉 | 幻觉 | |
| 人类反馈强化学习 | RLHF | 首次出现时写全称 |
| 函数调用 | Function Call | |
| 检索增强生成 | RAG | 首次出现时写全称 |
| 智能体/代理 | Agent | |
| 子智能体 | Subagent | |
| 模型上下文协议 | MCP | |

### 布局速查

| 布局 | 用途 |
|------|------|
| 默认布局 | 大多数页面 |
| `layout: center` | 封面、强调页 |
| `layout: two-cols` + `::right::` | 左右对比 |
| `grid grid-cols-3 gap-4` | 卡片网格 |

### 脚注格式

```html
<!-- 正文标记 -->
<sup class="opacity-60">1</sup>

<!-- 页面底部 -->
<div class="abs-bl m-6 text-xs opacity-50 leading-relaxed">
<sup>1</sup> 🔬 L1 | <a href="URL">来源标题</a> — 详细说明，让读者不用点进去就能理解核心信息
</div>
```

**脚注描述原则**：

- ❌ 太短：`METR Study (2025) — 开发者使用 AI 反而慢了 19%`
- ✅ 详细：`METR Study (2025) — RCT 随机对照实验，16 位开发者平均 5 年项目经验，任务平均耗时 2 小时，使用 Cursor + Claude 3.5/3.7 Sonnet`

### 踩坑经验

| 问题 | 解决方案 |
|------|----------|
| Mermaid timeline 越界 | 改用 grid 布局 + 卡片 |
| Vue 组件不稳定 | 用内联 HTML + Tailwind |
| Mermaid 图太小 | 单列 scale 0.7-0.8，two-cols 0.5-0.6 |

### 外部资源

- [antfu/talks](https://github.com/antfu/talks) — Slidev 作者的演示源码
- [Slidev Showcases](https://sli.dev/resources/showcases) — 布局灵感

## Risks / Trade-offs

| Risk | Mitigation |
|------|------------|
| 合并后单页信息过载 | 用户 Review 时检查，必要时拆回 |
| 30 页限制过于激进 | 可根据实际情况调整到 32-35 |

## Open Questions

- 具体哪些页面需要合并？（用户在逐页 Review 中决定）
- MCP/Skill 安利具体放在哪些概念页？（Review 中确定）
